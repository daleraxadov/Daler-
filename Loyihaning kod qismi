from telegram import Update, KeyboardButton, ReplyKeyboardMarkup
from telegram.ext import ApplicationBuilder, CommandHandler, MessageHandler, filters, ContextTypes

# Avtobus ma'lumotlari
bus_data = {
Â Â Â  "1-AVTOBUS": {
Â Â Â Â Â Â Â  "image": "1-avtobus.jpg",
Â Â Â Â Â Â Â  "info": (
Â Â Â Â Â Â Â Â Â Â Â  "ðŸšŒ 1-AVTOBUS ðŸšŒ\n\n"
Â Â Â Â Â Â Â Â Â Â Â  "ðŸ’° Narxi: 2000 so'm\n"
Â Â Â Â Â Â Â Â Â Â Â  "ðŸ’³ Plastik bilan to'lash: 1600 so'm (ayrim hollarda 600 so'm)\n"
Â Â Â Â Â Â Â Â Â Â Â  "ðŸ§’ Bolalar: 7 yoshgacha bepul\n"
Â Â Â Â Â Â Â Â Â Â Â  "ðŸ“¦ Ortiqcha yuk: 10 kg dan oshsa â€“ 5000 so'm\n\n"
Â Â Â Â Â Â Â Â Â Â Â  "ðŸ—º Yo'nalish xaritada ko'rsatilgan!"
Â Â Â Â Â Â Â  )
Â Â Â  },
Â Â Â  "2-Avtobus": {
Â Â Â Â Â Â Â  "image": "2-avtobus.jpg",
Â Â Â Â Â Â Â  "info": (
Â Â Â Â Â Â Â Â Â Â Â  "ðŸšŒ 2-AVTOBUS ðŸšŒ\n\n"
Â Â Â Â Â Â Â Â Â Â Â  "ðŸ’° Narxi: 2000 so'm\n"
Â Â Â Â Â Â Â Â Â Â Â  "ðŸ’³ Plastik bilan to'lash: 1600 so'm (ayrim hollarda 600 so'm)\n"
Â Â Â Â Â Â Â Â Â Â Â  "ðŸ§’ Bolalar: 7 yoshgacha bepul\n"
Â Â Â Â Â Â Â Â Â Â Â  "ðŸ“¦ Ortiqcha yuk: 10 kg dan oshsa â€“ 5000 so'm\n\n"
Â Â Â Â Â Â Â Â Â Â Â  "ðŸ—º Yo'nalish xaritada ko'rsatilgan!"
Â Â Â Â Â Â Â  )
Â Â Â  },
Â Â Â  "4-Avtobus": {
Â Â Â Â Â Â Â  "image": "4-avtobus.jpg",
Â Â Â Â Â Â Â  "info": (
Â Â Â Â Â Â Â Â Â Â Â  "ðŸšŒ 4-AVTOBUS ðŸšŒ\n\n"
Â Â Â Â Â Â Â Â Â Â Â  "ðŸ’° Narxi: 2000 so'm\n"
Â Â Â Â Â Â Â Â Â Â Â  "ðŸ’³ Plastik bilan to'lash: 1600 so'm (ayrim hollarda 600 so'm)\n"
Â Â Â Â Â Â Â Â Â Â Â  "ðŸ§’ Bolalar: 7 yoshgacha bepul\n"
Â Â Â Â Â Â Â Â Â Â Â  "ðŸ“¦ Ortiqcha yuk: 10 kg dan oshsa â€“ 5000 so'm\n\n"
Â Â Â Â Â Â Â Â Â Â Â  "ðŸ—º Yo'nalish xaritada ko'rsatilgan!"
Â Â Â Â Â Â Â  )
Â Â Â  }
}

# /start komandasi
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
Â Â Â  buttons = [
Â Â Â Â Â Â Â  [KeyboardButton("1-AVTOBUS")],
Â Â Â Â Â Â Â  [KeyboardButton("2-Avtobus")],
Â Â Â Â Â Â Â  [KeyboardButton("4-Avtobus")]
Â Â Â  ]
Â Â Â  markup = ReplyKeyboardMarkup(buttons, resize_keyboard=True)
Â Â Â  await update.message.reply_text("Qaysi avtobus yo'nalishini bilmoqchisiz?", reply_markup=markup)

# Foydalanuvchi xabarlari
async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
Â Â Â  text = update.message.text

Â Â Â  if text in bus_data:
Â Â Â Â Â Â Â  with open(bus_data[text]["image"], 'rb') as img:
Â Â Â Â Â Â Â Â Â Â Â  await update.message.reply_photo(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  photo=img,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  caption=bus_data[text]["info"]
Â Â Â Â Â Â Â Â Â Â Â  )
Â Â Â  else:
Â Â Â Â Â Â Â  await update.message.reply_text("Bu yo'nalish haqida ma'lumot topilmadi.")

# Botni ishga tushirish
if name == 'main':
Â Â Â  import os
Â Â Â  from dotenv import load_dotenv
Â Â Â  load_dotenv()

Â Â Â  token = os.getenv("BOT_TOKEN")

Â Â Â  app = ApplicationBuilder().token(token).build()
Â Â Â  app.add_handler(CommandHandler("start", start))
Â Â Â  app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))

Â Â Â  print("Bot ishga tushdi...")
Â Â Â  app.run_polling()
